# 선박 애뮬레이터 제작

## 개요
UDP 통신을 활용하여 선박에서 보내온 GPS(NMEA 0183 GPGGA 형식)과 RPM 데이터를 DB에 저장하고 윈도우 프로그램으로 시각화하는 프로그램.
애뮬레이터이므로, 선박에서 보내는 정보 역시도 제한을 걸어둔 난수 형태로 진행.

## 요구사항

### 송신

- UDP를 사용하여 GPS와 rpm을 데이터베이스가 있는 수신에게 보내야함
    - rpm와 GPS의 포트는 달라야 하며 포트는 변경이 가능해야함.
    - 신호가 날아오는 건 초당 10hz로 작업하되, 가능하다면 해당 속도를 1에서 10hz로 수정이 가능함.
- GPS
    - GPS NMEA-0183 국제 표준 규격(위경도가 있는)에 맞춰서 송신해야함.
        - GPGGA를 사용함.
            - *GPGGA* *Global Positioning System Fix Data*라고 한다. 여기에서 주로 알 수 있는 것은 시간, 위도, 경도, 고도 등이다.
                
                > $GPGGA,114455.532,**3735.0079**,N,**12701.6446**,E,1,03,7.9,48.8,M,19.6,M,0.0,0000*48
                > 
                - 해당 세부사항
                    - 114455.532는 시간으로서 Zulu time (그리니치 표준시) 기준으로 11시 44분 55.532초를 뜻한다.
                    - 3735.0079는 위도로서 37도 35.0079분을 뜻한다. 도(degree) 단위로 환산시, 35.0079/60 = 0.5 대략 37.5도가 된다.
                    - 뒤의 N은 북위를 뜻한다. 적도 남쪽에 있다면 S가 된다.
                    - 12701.6446은 경도로서 127도 1.6446분을 뜻한다. 도(degree) 단위로 환산시, 1.6446/60 = 0.027 대략 127.0도가 된다.
                    - 뒤의 E는 동경을 뜻한다. W가 되면 서경이 된다.
                    - '1'은 Fix의 종류를 뜻한다. 이 자리의 숫자에 따른 뜻은 다음과 같다.
                        - 0 : Invalid 잘못된 데이터. 주로 위성이 안 잡힐 경우.
                        - 1 : GPS에서 제공하는 기본 위성을 가지고만 계산할 경우.
                        - 2 : DGPS를 이용하여 보정하여 계산할 경우
                        - DGPS를 이용할 경우 더욱 정확한 측정이 가능해진다. DGPS는 지구의 지표의 위치가 명확히 알려진 곳에 기지국을 설치하거나 또 다른 위성(NAVSTAR GPS위성이 아닌 타 위성)이 GPS송출 신호를 내보내어 보정하도록 하는 방법이다. 보통 15M정도의 오차를 가지는 GPS가 DGPS로 보정할 경우 5M로 오차가 줄어들게 된다.
                    - '03'은 계산에 사용한 위성을 개수를 나타낸다. 위치를 알기 위해서 최소3개 이상의 신호를 받아야 한다.
                    - '7.9'는 horizontal dilution of Precision으로 2차원적 오차결정(수평방향)을 뜻한다.
                    - '48.8M'는 해수면 기준 고도(해발)이다.
                    - '19.6M'는 지오이드고(geoid height)이다
                    - '0.0'과 '0000'은 DGPS 사용시 마지막으로 update한 시간과 DGPS 기지국의 ID이다.
                    - '48'은 Check Sum이다.
                
                실제로 사용할 sentence는 아래로 고정 
                
                > $GPGGA,(신호가 날라온 시간),(위도),N,(경도),E,1,03,23,23,M,23,M,0.0,0000*1
                > 
    - 이후 현 위치를 수신받은 쪽에서 지도처럼 받아서 보여야 하는데, 너무 랜덤한 난수로 위경도를 받게되면 한 배의 궤적처럼 보이지 않기 떄문에 해당 사항을 신경써서 작업할 것
        - 로직 중에 하나로 1초당 움직일 수 있는 거리를 동서남북을 제한을 두면 충분히 일반적인 배가 움직이는 것처럼 보일 수 있음.
- RPM
    - 분당 회전수로 일반적으로 500에서 1500을 가짐 후진을 고려하면 -500에서 -1200까지 가능함.
    - min-max 왕복

### 수신

- 해당 수신 내역을 가져와서 DB에 저장, 테이블은 2개를 사용하면 됨.
    - 날라오는 건 혼합되어있는 데이터이므로 데이터 파싱을 하여 데이터베이스에 저장을 해야함.
- 이렇게 가져온 데이터베이스에서 위도와 경도를 가져와서 지도처럼 현 위치를 전시해야함.
- 그리고 받아온 rpm 게이지를 유저컨트롤(GDI+)를 사용해 직접 그려서 연동시킴
